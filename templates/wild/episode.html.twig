
{% extends 'base.html.twig' %}

{% block body %}
    <h1>{{ program.title }}</h1>
    <h3>Saison {{ season.number }}</h3>
    <h4>Episode {{ episode.number }} : {{ episode.title }}</h4>
    <p>Résumé :</p>
    <p>{{ episode.synopsis }}</p>

    {% for comment in comments %}
        <div class="card mb-2 border-white p-1">
            <p>Commentaire {{ loop.index }} : {{ comment.comment }}</p>
            <p>Note : {{ comment.rate }}</p>
            <p>Commentaire de : {{ comment.user.email }}</p>
            {% if is_granted("ROLE_SUBSCRIBER") %}
                {% if  (app.user.email == comment.user.email) or (is_granted('ROLE_ADMIN')) %}
                    <a href="{{ path('wild_delete', {'id' : comment.id}) }}"><button class="btn btn-danger">Supprimer le commentaire</button></a>
                {%endif%}
            {%endif%}
        </div>
    {% endfor %}

    {% if app.user %}
        <div>
            <a href="{{ path('wild_comment', {'id' : episode.id}) }}"><button class="btn btn-secondary">Laisser un Commentaire</button></a>
        </div>
    {% endif %}

    <a href="/wild/season/{{ season.id }}"><button class="btn btn-secondary">Retour vers la saison</button></a>
    <a href="/wild/show/{{ program.slug }}" class="btnReturn"><button class="btn btn-secondary">Retour vers la série</button></a>
{% endblock %}